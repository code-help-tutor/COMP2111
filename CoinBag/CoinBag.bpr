<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.prFile version="1">
<org.eventb.core.prProof name="axm5/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p3">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p3" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p4">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p4" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="p5,p6">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p8">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p1,p10,p5"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p8" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p5">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p5" org.eventb.core.prHyps="p5"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p13">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm6/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p7"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p8">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p1"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p8" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p10">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p10" org.eventb.core.prHyps="p2,p5,p1,p4,p6,p7,p9">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p11">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p11" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="emptybag∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="COIN × {0}∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm8/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="c,b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p12">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p13">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p15,p16">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p3,p1,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p4,p8,p3,p6,p9,p2,p10,p7,p1,p11,p15,p16,p19,p20,p21,p22,p23">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p24">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p25">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p3,p1,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p21">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p28" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p29">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p3,p1,p15,p16"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="p21"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p30">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p30" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p3,p1,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="p22">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p28" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p32">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p3,p1,p15,p16"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="p22"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="b1∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·⊤⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈COIN⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm10/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p15,p16">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="DESELECT7" org.eventb.core.prHyps="p4,p8,p1,p12,p13,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p2,p7,p4,p8,p9,p3,p11,p5,p1,p12,p13,p15,p16,p19,p20,p21,p22,p23,p24,p25,p26">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="DESELECT7" org.eventb.core.prHyps="p4,p8,p1,p12,p13,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p28" org.eventb.core.prHyps="p2,p7,p4,p8,p9,p3,p11,p5,p1,p12,p13,p15,p16,p19,p20,p21,p22,p23,p24,p25,p26">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="b2 ↦ b1∈dom(bagunion)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧b2 ↦ b1∈dom(bagunion)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧b2 ↦ b1∈dom(bagunion)"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧b2 ↦ b1∈dom(bagunion)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm12/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p16">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p16" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p19">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p21">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="DESELECT8" org.eventb.core.prHyps="p8,p11,p1,p5,p6,p15,p17,p19"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p21" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p32">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p7,p26"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="p2,p3,p8,p11,p4,p7,p13,p9,p1,p5,p6,p15,p17,p19,p22,p23,p24,p25,p26,p27,p28,p29,p30,p31">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p33">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="DESELECT8" org.eventb.core.prHyps="p8,p11,p1,p5,p6,p15,p17,p19"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p7,p26"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="p19"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b∈COINBAG⇒emptybagb∈dom(bagvalue)∧b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒emptybagb∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="emptybagb∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="emptybagb∈dom(bagvalue)∧b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒emptybagb∈dom(bagvalue)∧b∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="(COIN × {0})b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒emptybagb∈dom(bagvalue)∧⊤∧b∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm4/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b,c)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p4">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p4" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="p5,p6">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p8">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p2,p5"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p8" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p5">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p5" org.eventb.core.prHyps="p5"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p11">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p11" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p12">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p2,p5"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="p10"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p13">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p2,p5"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p15">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p15" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p16">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p16" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p17">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p2,p5"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p1,p3,p2,p5,p6,p9,p10">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="b{c ↦ 0}∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="b∈COINBAG∧c∈dom(b)⇒b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈COIN ⇸ ℤ∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ∧b{c ↦ 0}∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈COIN ⇸ ℤ∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ∧b{c ↦ 0}∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="c∈dom(CoinValue)">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈COIN ⇸ ℤ∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ∧b{c ↦ 0}∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="c∈dom(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="COIN"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm4/THM" org.eventb.core.confidence="0" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p4"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p5"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm13/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="c,b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="p21,p22">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="DESELECT9" org.eventb.core.prHyps="p9,p1,p8,p7,p3,p13,p17,p21,p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p10,p29,p30"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p33">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p38">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p38" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p39">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p39" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p40">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="DESELECT9" org.eventb.core.prHyps="p9,p1,p8,p7,p3,p13,p17,p21,p22"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p40" org.eventb.core.prHyps="p33"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p41">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p41" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p42">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="DESELECT9" org.eventb.core.prHyps="p9,p1,p8,p7,p3,p13,p17,p21,p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p10,p29,p30"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p42" org.eventb.core.prHyps="p34">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p38">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p38" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p39">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p39" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p43">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="DESELECT9" org.eventb.core.prHyps="p9,p1,p8,p7,p3,p13,p17,p21,p22"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p43" org.eventb.core.prHyps="p34"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p44">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="DESELECT9" org.eventb.core.prHyps="p9,p1,p8,p7,p3,p13,p17,p21,p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p10,p29,p30"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="p2,p5,p9,p4,p6,p10,p15,p12,p1,p8,p7,p3,p13,p16,p17,p21,p22,p26,p27,p28,p29,p30,p31,p32,p33,p34,p35,p36,p37">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p45">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps="p13"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="b1∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·c∈COIN⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·⊤⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="b1 ↦ b2∈dom(subbag)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm14/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="c,b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="p21,p22">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p9,p13,p1,p6,p7,p3,p11,p16,p17,p21,p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p8,p30,p31"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p35">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p40">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p40" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p41">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p41" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p42">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p9,p13,p1,p6,p7,p3,p11,p16,p17,p21,p22"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p42" org.eventb.core.prHyps="p35"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p43">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p43" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p9,p13,p1,p6,p7,p3,p11,p16,p17,p21,p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p8,p30,p31"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="p36">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p40">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p40" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p41">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p41" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p45">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p9,p13,p1,p6,p7,p3,p11,p16,p17,p21,p22"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps="p36"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p46">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p9,p13,p1,p6,p7,p3,p11,p16,p17,p21,p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p8,p30,p31"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p46" org.eventb.core.prHyps="p2,p4,p9,p13,p5,p8,p15,p10,p1,p6,p7,p3,p11,p16,p17,p21,p22,p26,p27,p28,p29,p30,p31,p32,p33,p34,p35,p36,p37,p38,p39">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p47">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p47" org.eventb.core.prHyps="p11"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="b1∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·c∈COIN⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(∀c⦂COIN·⊤⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="b1 ↦ b2∈dom(subbag)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ∧b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm11/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p15">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p15" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p16">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="DESELECT7" org.eventb.core.prHyps="p2,p1,p4,p19,p16,p20,p9"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p29">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="p5,p8,p4,p9,p11,p3,p12,p6,p2,p1,p16,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p30">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p30" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="COIN × {0} ↦ b∈dom(bagunion)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒emptybag ↦ b∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="emptybag ↦ b∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="emptybag ↦ b∈dom(bagunion)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="b∈COINBAG⇒emptybag ↦ b∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm11/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p16,p17"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p24">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="DESELECT8" org.eventb.core.prHyps="p2,p4,p30,p21,p24,p18,p17,p27"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p36">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p37"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p40,p1"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p42"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p9,p44"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0},b)" org.eventb.core.prHyps="p33">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p48">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p48" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p49">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p33"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p49,p35" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p49"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p50" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p50"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ hyp mp (COIN × {0}∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)={c·⊤ ∣ c ↦ b(c)})" org.eventb.core.prHyps="p51">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p52">
<org.eventb.core.prHypAction name="HIDE0" org.eventb.core.prHyps="p51"/>
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p52" org.eventb.core.prHyps="p2,p5,p45,p26,p8,p39,p47,p11,p46,p33,p1,p3,p4,p6,p44,p24,p18,p35,p9,p29,p12">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p53">
<org.eventb.core.prHypAction name="HIDE0" org.eventb.core.prHyps="p51"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with bagunion(COIN × {0} ↦ b)={c·⊤ ∣ c ↦ b(c)}" org.eventb.core.prGoal="p36" org.eventb.core.prHyps="p53">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p54">
<org.eventb.core.prRule name="r12" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="NewPP" org.eventb.core.prGoal="p54" org.eventb.core.prHyps="">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="R0"/>
<org.eventb.core.prString name=".maxSteps" org.eventb.core.prSValue="-1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧¬b(c)=0⇒bagvalue(b)=b(c)∗coinvalue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="coinvalue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈COIN∧b(c)≠0⇒bagvalue(b)=b(c)∗coinvalue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="coinvalue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧¬b(c)=0⇒bagvalue(b)=b(c)∗coinvalue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="coinvalue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ∧⊤⇒bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ (COIN × {0})(c)+b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧⊤∧¬b(c)=0⇒bagvalue(b)=b(c)∗coinvalue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="coinvalue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ∧b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ (COIN × {0})(c)+b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="{c⦂COIN·⊤ ∣ c ↦ b(c)}=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈COIN∧¬b(c)=0⇒bagvalue(b)=b(c)∗coinvalue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="coinvalue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × {0}"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.mngHyp"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r12" org.eventb.core.prRID="org.eventb.pp.pp:1"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL2:0"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.impE:2"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm15/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p18,p19"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p25">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p29,p18"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p10,p14,p1,p7,p8,p3,p12,p25,p28,p29,p30"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p45">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p9,p35,p36"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p45" org.eventb.core.prHyps="p2,p5,p10,p14,p6,p9,p16,p11,p1,p7,p8,p3,p12,p25,p28,p29,p30,p23,p31,p32,p33,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p44">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p46">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p46" org.eventb.core.prHyps="p12"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒emptybag ↦ b∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="emptybag ↦ b∈dom(subbag)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="COIN × {0} ↦ b∈dom(subbag)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈SUBBAG">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b∈COINBAG⇒emptybag ↦ b∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="emptybag ↦ b∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm3/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b,c)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p4">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p4" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="p5,p6">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p8">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p8" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p5">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p5" org.eventb.core.prHyps="p5"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p10">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p10" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p11">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p11" org.eventb.core.prHyps="p5"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p12">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p13">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p15">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p15" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p16">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p16" org.eventb.core.prHyps="p1,p3,p2,p5,p6,p9">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="b∈COIN → ℕ∧c∈dom(b)⇒b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈COIN ⇸ ℤ∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ∧b{c ↦ 0}∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b{c ↦ 0}∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈COIN ⇸ ℤ∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ∧b{c ↦ 0}∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒b∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈COIN ⇸ ℤ∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ∧b{c ↦ 0}∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="c∈dom(CoinValue)">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="c∈dom(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="COIN"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN → ℕ"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm6/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p2,p10"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p12">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p13,p15"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0})" org.eventb.core.prHyps="p17">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p18" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p19">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p12">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="remove ¬ in ¬(COIN × {0}∈COIN ⇸ ℕ∧(¬COIN × {0}=∅⇒ran(COIN × {0})={0}))" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="remove ¬ in ¬(¬COIN × {0}=∅⇒ran(COIN × {0})={0})" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="p1,p6,p2,p3,p7,p8,p5,p9,p17,p23">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue=""/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue({c} ⩤ b)"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="¬(COIN × {0}∈COIN ⇸ ℕ∧(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0}))"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue({c} ⩤ b)"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="¬COIN × {0}∈COIN ⇸ ℕ∨(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))∧¬ran(COIN × {0})={0})"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="¬COIN × {0}∈COIN ⇸ ℕ∨¬(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0})"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧b=(∅ ⦂ ℙ(COIN×ℤ))⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧b=(∅ ⦂ ℙ(COIN×ℤ))⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN ⇸ ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="COIN × {0}∈COIN ⇸ ℕ∧(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0})⇒⊥"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="COIN × {0}∈COIN ⇸ ℕ∧(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0})⇒bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × {0}"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.rn"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm17/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p22">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p23,p24"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p27"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p29,p30"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p28"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p32"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prGoal="p22" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p45">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="DESELECT12" org.eventb.core.prHyps="p10,p16,p1,p8,p9,p4,p14,p13,p2,p21,p24,p31"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p11,p37,p38,p40"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p52" org.eventb.core.prHyps="p50,p51">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p52" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p53">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p53" org.eventb.core.prHyps="p3,p6,p10,p16,p7,p11,p18,p12,p1,p8,p9,p4,p14,p13,p2,p21,p24,p31,p30,p33,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p44,p46,p47,p48,p49,p50,p51">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p54">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p54" org.eventb.core.prHyps="p14"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG∧((∀c⦂COIN·⊤∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈SUBBAG">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm17/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p19">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="DESELECT7" org.eventb.core.prHyps="p3,p1,p21,p15,p19,p17,p23"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0},b)" org.eventb.core.prHyps="p27">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p32">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p32" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p33">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p27"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p33,p29" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p33"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p34"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ hyp mp (COIN × {0}∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)={c·⊤ ∣ c ↦ b(c)})" org.eventb.core.prHyps="p35">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p36">
<org.eventb.core.prHypAction name="HIDE0" org.eventb.core.prHyps="p35"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p36" org.eventb.core.prHyps="p3,p2,p5,p7,p8,p10,p26,p30,p11,p27,p1,p4,p6,p19,p15,p29,p25,p12">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p37">
<org.eventb.core.prHypAction name="HIDE0" org.eventb.core.prHyps="p35"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with bagunion(COIN × {0} ↦ b)={c·⊤ ∣ c ↦ b(c)}" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="p37">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p38">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p39,p41"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p5,p4,p12,p6,p3,p1,p15,p19,p27"/>
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="NewPP" org.eventb.core.prGoal="p38" org.eventb.core.prHyps="">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="R0"/>
<org.eventb.core.prString name=".maxSteps" org.eventb.core.prSValue="-1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧⊤∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧b=(∅ ⦂ ℙ(COIN×ℤ))⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧b=(∅ ⦂ ℙ(COIN×ℤ))⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ∧⊤⇒bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ (COIN × {0})(c)+b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈COIN∧b(c)≠0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue({c} ⩤ b)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN ⇸ ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue({c} ⩤ b)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue({c} ⩤ b)"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="bagvalue∈(COIN ⇸ ℕ) → ℕ"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ∧b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)={c⦂COIN·⊤ ∣ c ↦ (COIN × {0})(c)+b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈COIN∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="{c⦂COIN·⊤ ∣ c ↦ b(c)}=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × {0}"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.mngHyp"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.impE:2"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="org.eventb.pp.pp:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm16/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p21">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p21" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="p22,p23">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p26,p27"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p28"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p22,p9,p10,p1,p2,p4,p15,p16,p20,p27,p23"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p32,p33,p35,p12"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p3,p7,p11,p13,p8,p12,p18,p14,p1,p10,p9,p4,p16,p15,p2,p19,p20,p22,p23,p27,p29,p30,p31,p32,p33,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p44">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p45">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps="p16"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN ⇸ ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm16/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p8"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p18,p19">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="DESELECT7" org.eventb.core.prHyps="p18,p1,p21,p14,p16,p19,p23"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst b1,b2)" org.eventb.core.prHyps="p26">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p31" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p32">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p32,p28,p29" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p32"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p33"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with bagunion(b1 ↦ b2)={c·⊤ ∣ c ↦ b1(c)+b2(c)}" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p34">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p35">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prHypAction name="SELECT1" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst b2,b1)" org.eventb.core.prHyps="p26">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p31" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p36">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p36,p28,p29" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p36"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p37"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with bagunion(b2 ↦ b1)={c·⊤ ∣ c ↦ b2(c)+b1(c)}" org.eventb.core.prGoal="p35" org.eventb.core.prHyps="p38">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p39">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p39" org.eventb.core.prHyps="p4,p9,p7,p2,p6,p10,p3,p11,p5,p1,p14,p18,p19,p25,p26,p28,p29,p30,p34,p38">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e1,e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧⊤∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="{c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}={c⦂COIN·⊤ ∣ c ↦ b2(c)+b1(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="bagunion(b2 ↦ b1)={c⦂COIN·⊤ ∣ c ↦ b2(c)+b1(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="⊤∧⊤⇒bagunion(b2 ↦ b1)={c⦂COIN·⊤ ∣ c ↦ b2(c)+b1(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈COIN∧b(c)≠0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="⊤∧⊤⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="b2∈COIN → ℕ∧b1∈COIN → ℕ⇒bagunion(b2 ↦ b1)={c⦂COIN·⊤ ∣ c ↦ b2(c)+b1(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN ⇸ ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue({c} ⩤ b)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="bagvalue∈(COIN ⇸ ℕ) → ℕ"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧ran(b)={0}⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈COIN∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="{c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧¬b(c)=0⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b1">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="b2">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.mngHyp"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm18/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p16">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p16" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p17">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="DESELECT5" org.eventb.core.prHyps="p15,p17,p2,p8,p9"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p21,p10"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay=" rewrites in goal" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="p3,p6,p5,p1,p7,p10,p13,p11,p2,p8,p9,p14,p15,p17,p19,p20,p21,p22,p23,p24,p25">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.1.1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="bagvalue((dom(b) ⩤ (COIN × {0}))∪b)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN ⇸ ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue({c} ⩤ b)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="bagvalue∈(COIN ⇸ ℕ) → ℕ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagvalue((COIN × {0})b)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.relOvrRewrites"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm19/THM" org.eventb.core.confidence="0" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p4"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p6,p7"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p8"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p15,p16,p17">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="DESELECT15" org.eventb.core.prHyps="p19,p21,p23,p25,p27,p29,p31,p33,p35,p37,p6,p9,p11,p15,p16"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p44,p26,p28,p32"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm18/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="c,b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p21,p22"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p25"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prGoal="p28" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p42">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="DESELECT13" org.eventb.core.prHyps="p11,p17,p1,p10,p9,p4,p15,p14,p2,p6,p20,p21,p24"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p12,p33,p34,p36"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p42" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p47">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p47" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p48">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p48" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p51" org.eventb.core.prHyps="p49,p50">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p51" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p52">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p52" org.eventb.core.prHyps="p3,p7,p11,p17,p8,p12,p19,p13,p1,p10,p9,p4,p15,p14,p2,p6,p20,p21,p24,p27,p29,p30,p31,p32,p33,p34,p35,p36,p37,p38,p39,p40,p41,p43,p44,p45,p46,p49,p50">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p53">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p53" org.eventb.core.prHyps="p15"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p54">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p54" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p55">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p55" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p57" org.eventb.core.prHyps="p49,p50,p56">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p57" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p58">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p58" org.eventb.core.prHyps="p3,p7,p11,p17,p8,p12,p19,p13,p1,p10,p9,p4,p15,p14,p2,p6,p20,p21,p24,p27,p29,p30,p31,p32,p33,p34,p35,p36,p37,p38,p39,p40,p41,p43,p44,p45,p46,p49,p50,p56">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p59">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p59" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p60">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p60" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p61">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p61" org.eventb.core.prHyps="p49">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p62">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p62" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p63">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p63" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p64">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p64" org.eventb.core.prHyps="p49"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p65">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p65" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p66">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p66" org.eventb.core.prHyps="p50">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p62">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p62" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p63">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p63" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p67">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p67" org.eventb.core.prHyps="p50"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="b1 ↦ b2∈dom(bagdiff)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·⊤⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ))"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈COIN⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ))"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ)"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈COIN⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ))"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="b1∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="subbag(b2 ↦ b1)=TRUE">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm19/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p14">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p21">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p21" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p23,p24"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p8"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p24"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p28"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p30">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p30" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p34" org.eventb.core.prHyps="p32,p33">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p34" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p35">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="DESELECT14" org.eventb.core.prHyps="p1,p2,p44,p4,p6,p32,p33,p11,p10,p27,p15,p16,p26,p23"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p38,p39,p41,p12"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p35" org.eventb.core.prHyps="p3,p7,p13,p18,p9,p12,p20,p14,p1,p11,p10,p4,p16,p15,p2,p6,p22,p23,p26,p27,p29,p32,p33,p36,p37,p38,p39,p40,p41,p42,p43,p46,p47,p48,p49,p50,p51,p52,p53,p54">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p55">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p55" org.eventb.core.prHyps="p16"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p56">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p56" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p57">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p57" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p59" org.eventb.core.prHyps="p32,p33,p58">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p59" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p60">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="DESELECT16" org.eventb.core.prHyps="p13,p18,p1,p11,p10,p4,p16,p15,p2,p6,p22,p23,p26,p27,p32,p33"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p12,p38,p39,p41"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p60" org.eventb.core.prHyps="p3,p7,p13,p18,p9,p12,p20,p14,p1,p11,p10,p4,p16,p15,p2,p6,p22,p23,p26,p27,p29,p32,p33,p58,p61,p62,p36,p37,p38,p39,p40,p41,p42,p43,p63,p46,p47,p48,p49,p50,p51,p52,p53,p54">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p64">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p64" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p65">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional image goal for bagdiff(b1 ↦ b2)" org.eventb.core.prGoal="p65" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p65" org.eventb.core.prHyps="p66">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p65" org.eventb.core.prHyps="p13">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p66">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p66" org.eventb.core.prHyps="p66"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p67">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p67" org.eventb.core.prHyps="p13">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p32">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="p32"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p68">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p68" org.eventb.core.prHyps="p13">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p33">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p33"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b1 ↦ b2)∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="b1 ↦ b2∈dom(bagdiff)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="bagdiff(b1 ↦ b2)∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="b1∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b1 ↦ b2)∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="bagdiff(b1 ↦ b2)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b1 ↦ b2)∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b1∈dom(bagvalue)∧b2∈dom(bagvalue))"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b1 ↦ b2)∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2∈dom(bagvalue))"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="subbag(b2 ↦ b1)=TRUE">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(b1∈COINBAG∧b2∈COINBAG⇒b2 ↦ b1∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b1 ↦ b2)∈dom(bagvalue)∧⊤∧b1∈dom(bagvalue)∧b2∈dom(bagvalue))"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="b1 ↦ b2∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b1 ↦ b2)∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.funImgGoal"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm9/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="c,b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p12">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p13">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p15,p16">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="DESELECT6" org.eventb.core.prHyps="p3,p7,p1,p11,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p4,p6,p3,p7,p8,p2,p10,p5,p1,p11,p15,p16,p19,p20,p21,p22,p23,p24,p25">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p26">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="DESELECT6" org.eventb.core.prHyps="p3,p7,p1,p11,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p28" org.eventb.core.prHyps="p23">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p29">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p30">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p30" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p31">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="DESELECT6" org.eventb.core.prHyps="p3,p7,p1,p11,p15,p16"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="p23"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p32">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p33">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="DESELECT6" org.eventb.core.prHyps="p3,p7,p1,p11,p15,p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p24">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p29">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p30">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p30" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p34">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="DESELECT6" org.eventb.core.prHyps="p3,p7,p1,p11,p15,p16"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p34" org.eventb.core.prHyps="p24"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="b1∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·⊤⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="c∈dom(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈dom(b1))∧b1∈COIN ⇸ ℤ∧(∀c⦂COIN·c∈dom(b2))∧b2∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b2)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧(∀c⦂COIN·c∈COIN⇒c∈dom(b1)∧b1∈COIN ⇸ ℤ∧c∈dom(b2)∧b2∈COIN ⇸ ℤ)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm9/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p8"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p15,p16">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p13,p15,p1,p16"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p2,p9,p3,p5,p10,p4,p11,p6,p1,p12,p13,p15,p16,p18,p19,p20,p21,p22">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN ⇸ ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm10/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p15,p16">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="DESELECT7" org.eventb.core.prHyps="p2,p8,p1,p15,p16,p18,p19"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst b1,b2)" org.eventb.core.prHyps="p26">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p28" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p29">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p24,p23,p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p29"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p30"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with bagunion(b1 ↦ b2)={c·⊤ ∣ c ↦ b1(c)+b2(c)}" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="p31">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p32">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="p4,p7,p2,p8,p10,p3,p11,p5,p1,p15,p16,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p31">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="⊤∧⊤⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="{c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b2">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="b1">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm14/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p18,p19"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p24">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="DESELECT8" org.eventb.core.prHyps="p1,p8,p9,p3,p14,p24,p20,p19"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p25" org.eventb.core.prHyps="p7">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p37">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p28,p29,p10"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0},b)" org.eventb.core.prHyps="p22">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p38">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p38" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p39">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p37" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p37">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p39"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p40"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="remove ¬ in ¬(∀c·0≤b(c))" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p41"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p42"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p42"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∃ hyp (∃c·0&gt;b(c))" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prHypAction>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p43"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p44"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ct hyp (0&gt;b(c))" org.eventb.core.prGoal="p37" org.eventb.core.prHyps="p44">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p46" org.eventb.core.prHyps="p45">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p44"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p46" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p48">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p45"/>
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p48" org.eventb.core.prHyps="p2,p6,p11,p12,p7,p10,p16,p13,p1,p8,p9,p3,p14,p17,p19,p20,p22,p24,p26,p27,p28,p29,p30,p31,p32,p33,p34,p35,p36,p44,p47">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue=""/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="0≤b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="(∀c⦂COIN·(COIN × {0})(c)≤b(c))⇔⊥">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="0&gt;b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN ⇸ ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN ⇸ ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∃c⦂COIN·0&gt;b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∃c⦂COIN·¬0≤b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="¬(∀c⦂COIN·0≤b(c))">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="subbag(COIN × {0} ↦ b)=FALSE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="¬0&gt;b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="(∀c⦂COIN·(COIN × {0})(c)≤b(c))⇔subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="¬subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × {0}"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.exF"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.rn"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.contr"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm20/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p15">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p22">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p22" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p24,p25"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p25"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p29"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p46">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="DESELECT15" org.eventb.core.prHyps="p13,p19,p1,p12,p11,p5,p17,p16,p2,p7,p3,p23,p24,p27,p28"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p14,p35,p36,p38"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p46" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p51">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p51" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p52">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p52" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p55" org.eventb.core.prHyps="p53,p54">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p55" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p56">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p56" org.eventb.core.prHyps="p4,p8,p13,p19,p10,p14,p21,p15,p1,p12,p11,p5,p17,p16,p2,p7,p3,p23,p24,p27,p28,p30,p31,p32,p33,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p44,p45,p47,p48,p49,p50,p53,p54">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p57">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p57" org.eventb.core.prHyps="p17"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p58">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p58" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p59">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p59" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p61" org.eventb.core.prHyps="p53,p54,p60">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p61" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p62">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p62" org.eventb.core.prHyps="p31">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p53">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p53" org.eventb.core.prHyps="p53"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p63">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p63" org.eventb.core.prHyps="p31">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p54">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p54" org.eventb.core.prHyps="p54"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒b1∈dom(bagvalue)∧b2∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒b1∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b2∈dom(bagvalue))"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒b1∈dom(bagvalue)∧b2∈dom(bagvalue))"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="b1∈dom(bagvalue)∧b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ⇒b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒b1∈dom(bagvalue)∧⊤∧b2∈dom(bagvalue))"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒b1∈dom(bagvalue)∧b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="b1 ↦ b2∈dom(subbag)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="b1∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒b1 ↦ b2∈dom(subbag)∧subbag∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ BOOL)∧(∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒b1∈dom(bagvalue)∧b2∈dom(bagvalue))"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN → ℕ"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm20/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p23,p24"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p24"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p27"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p29">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p30,p31,p32">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="DESELECT17" org.eventb.core.prHyps="p14,p19,p1,p12,p11,p5,p17,p16,p2,p7,p3,p22,p23,p25,p26,p30,p31"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p13,p38,p39,p41"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst b2,b1)" org.eventb.core.prHyps="p26">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p55">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p55" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p56">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p31,p32,p30,p56" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p56"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p57" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p57"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst b2,b1)" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p55">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p55" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p59">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p31,p32,p30,p59" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p59"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p60" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p60"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ah (bagvalue(b2)=bagvalue(b1)+bagvalue(bagdiff(b2 ↦ b1)))" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p62">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p62" org.eventb.core.prHyps="p15">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p63">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p63" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p64">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p64" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p65">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p65" org.eventb.core.prHyps="p14">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prRule name="r12" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="p31"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p66">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p66" org.eventb.core.prHyps="p14">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p30">
<org.eventb.core.prRule name="r12" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p30" org.eventb.core.prHyps="p30"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p67">
<org.eventb.core.prRule name="r13" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p67" org.eventb.core.prHyps="p4,p8,p14,p19,p10,p13,p21,p15,p1,p12,p11,p5,p17,p16,p2,p7,p3,p22,p23,p25,p26,p28,p30,p31,p32,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p44,p45,p46,p47,p48,p49,p50,p51,p52,p53,p54,p58,p61">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p68">
<org.eventb.core.prRule name="r14" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p68" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p69">
<org.eventb.core.prRule name="r15" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional image goal for bagdiff(b2 ↦ b1)" org.eventb.core.prGoal="p69" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p69" org.eventb.core.prHyps="p70">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p69" org.eventb.core.prHyps="p14">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p70">
<org.eventb.core.prRule name="r12" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p70" org.eventb.core.prHyps="p70"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p71" org.eventb.core.prHyps="p65,p15,p66,p67,p68,p69">
<org.eventb.core.prRule name="r13" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p71" org.eventb.core.prHyps="p4,p8,p14,p19,p10,p13,p21,p15,p1,p12,p11,p5,p17,p16,p2,p7,p3,p22,p23,p25,p26,p28,p30,p31,p32,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p44,p45,p46,p47,p48,p49,p50,p51,p52,p53,p54,p58,p61,p65,p66,p67,p68,p69">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prHyps="p65,p15,p66,p67,p68,p69,p71">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with bagvalue(b2)=bagvalue(b1)+bagvalue(bagdiff(b2 ↦ b1))" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p71">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p73">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p61" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p61"/>
<org.eventb.core.prRule name="r13" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p73" org.eventb.core.prHyps="p4,p8,p14,p19,p10,p13,p21,p15,p1,p12,p11,p5,p17,p16,p2,p7,p3,p22,p23,p25,p26,p28,p30,p31,p32,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p44,p45,p46,p47,p48,p49,p50,p51,p52,p53,p54,p58,p61,p65,p66,p67,p68,p69,p71,p72">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prPredRef name=".pred" org.eventb.core.prRef="p71"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e1,e2"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e1,e2"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="b2∈COINBAG∧b1∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(bagdiff(b2 ↦ b1))=bagvalue(b2) − bagvalue(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="bagdiff(b2 ↦ b1)={c⦂COIN·⊤ ∣ c ↦ b2(c) − b1(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="⊤∧⊤∧⊤⇒bagvalue(bagdiff(b2 ↦ b1))=bagvalue(b2) − bagvalue(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="b2 ↦ b1∈dom(bagdiff)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p69" org.eventb.core.predicate="bagdiff(b2 ↦ b1)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="b2∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2 ↦ b1∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b2 ↦ b1)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p72" org.eventb.core.predicate="bagvalue(bagdiff(b2 ↦ b1))=bagvalue(b1)+bagvalue(bagdiff(b2 ↦ b1)) − bagvalue(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="b2∈dom(bagvalue)∧⊤∧b1∈dom(bagvalue)∧b2 ↦ b1∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b2 ↦ b1)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="b1∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="b2∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b1∈dom(bagvalue)∧b2 ↦ b1∈dom(bagdiff)∧bagdiff∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagdiff(b2 ↦ b1)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="b2∈COINBAG∧b1∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagdiff(b2 ↦ b1)={c⦂COIN·⊤ ∣ c ↦ b2(c) − b1(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p71" org.eventb.core.predicate="bagvalue(b2)=bagvalue(b1)+bagvalue(bagdiff(b2 ↦ b1))">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p70" org.eventb.core.predicate="bagdiff(b2 ↦ b1)∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p73" org.eventb.core.predicate="bagvalue(b1)≤bagvalue(b1)+bagvalue(bagdiff(b2 ↦ b1))">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="⊤∧⊤∧⊤⇒bagdiff(b2 ↦ b1)={c⦂COIN·⊤ ∣ c ↦ b2(c) − b1(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="bagvalue(bagdiff(b2 ↦ b1))=bagvalue(b2) − bagvalue(b1)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e2" org.eventb.core.expression="b1">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b2">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r14" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r12" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.mngHyp"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.cut"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
<org.eventb.core.prReas name="r13" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r15" org.eventb.core.prRID="org.eventb.core.seqprover.funImgGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm7/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p7"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p8">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p1,p4,p7"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p8" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p12">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p12" org.eventb.core.prHyps="p2,p3,p1,p4,p5,p7,p9,p10,p11">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p13">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="emptybag∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="COIN × {0}∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm7/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p5,p9,p2"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p13">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0})" org.eventb.core.prHyps="p12">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p14" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p15">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p13">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="remove ¬ in ¬(COIN × {0}∈COIN → ℕ∧(¬COIN × {0}=∅⇒ran(COIN × {0})={0}))" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="remove ¬ in ¬(¬COIN × {0}=∅⇒ran(COIN × {0})={0})" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∨ hyp (¬COIN × {0}∈COIN → ℕ∨(¬COIN × {0}=∅∧¬ran(COIN × {0})={0}))" org.eventb.core.prHyps="p19">
<org.eventb.core.prAnte name="'" org.eventb.core.prHyps="p20">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20,p19" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="HIDE0" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="p1,p4,p2,p5,p6,p8,p3,p9,p10,p11,p12,p20">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p22,p23">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23,p22,p19" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="HIDE0" org.eventb.core.prHyps="p24"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p13" org.eventb.core.prHyps="p1,p4,p2,p5,p6,p8,p3,p9,p10,p11,p12,p22,p23">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1:500"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue=""/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="¬⊥∨(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))∧¬ran(COIN × {0})={0})"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="¬COIN × {0}∈COIN → ℕ"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="¬ran(COIN × {0})={0}"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ∧(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0})⇒⊥"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="COIN × {0}∈COIN → ℕ∧(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0})⇒bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="¬COIN × {0}∈COIN → ℕ∨(¬⊥∧¬⊥)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="¬COIN × {0}∈COIN → ℕ∨(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))∧¬ran(COIN × {0})={0})"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="¬(COIN × {0}∈COIN → ℕ∧(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0}))"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="¬COIN × {0}∈COIN → ℕ∨¬(¬COIN × {0}=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(COIN × {0})={0})"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × {0}"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.rn"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.disjE"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm12/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p4"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p6"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p7">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p9" org.eventb.core.prHyps="p8">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="DESELECT8" org.eventb.core.prHyps="p10,p12,p14,p16,p18,p4,p6,p8"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p9" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="DESELECT2" org.eventb.core.prHyps="p23,p19"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ah ((COIN × {0})b=b)" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p27" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p28">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="NewPP" org.eventb.core.prGoal="p28" org.eventb.core.prHyps="p22">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="R0"/>
<org.eventb.core.prString name=".maxSteps" org.eventb.core.prSValue="-1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prHyps="p28">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with (COIN × {0})b=b" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p28">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p29">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p27" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prPredRef name=".pred" org.eventb.core.prRef="p28"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="(COIN × {0})b=b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="bagvalue(b)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagvalue((COIN × {0})b)=bagvalue(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.pp.pp:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.cut"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm15/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p18,p19"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p25">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p18,p28"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="DESELECT11" org.eventb.core.prHyps="p8,p7,p1,p10,p3,p12,p27,p29,p25,p28,p14"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="DESELECT3" org.eventb.core.prHyps="p34,p35,p9"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0},b)" org.eventb.core.prHyps="p23">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p45">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p46">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p46"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p47"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="remove ¬ in ¬(∀c·0≤b(c))" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p48"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p49"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p49" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p49"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∃ hyp (∃c·0&gt;b(c))" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p50" org.eventb.core.prInfHyps="p51">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prHypAction>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p50"/>
<org.eventb.core.prHypAction name="SELECT2" org.eventb.core.prHyps="p51"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0},b)" org.eventb.core.prHyps="p23">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p45">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p46">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p46"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0},b)" org.eventb.core.prHyps="p23">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p45">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p46">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p46"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst COIN × {0},b)" org.eventb.core.prHyps="p23">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p45">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p46">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p46"/>
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ct hyp (0&gt;b(c))" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="p51">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p53" org.eventb.core.prHyps="p52">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p51"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p53" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p55">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p52" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p52"/>
<org.eventb.core.prRule name="r12" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p55" org.eventb.core.prHyps="p2,p5,p10,p14,p6,p9,p16,p11,p1,p7,p8,p3,p12,p25,p27,p28,p29,p23,p30,p31,p32,p33,p34,p35,p36,p37,p38,p39,p40,p41,p42,p43,p51,p54">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue=""/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="0≤b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="0&gt;b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="(∀c⦂COIN·(COIN × {0})(c)≤b(c))⇔⊥">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∃c⦂COIN·0&gt;b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∃c⦂COIN·¬0≤b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="¬(∀c⦂COIN·0≤b(c))">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="subbag(COIN × {0} ↦ b)=FALSE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈SUBBAG">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈SUBBAG∧b2∈SUBBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="SUBBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="¬0&gt;b(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="(∀c⦂COIN·(COIN × {0})(c)≤b(c))⇔subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="¬subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × {0}"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.mngHyp"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="org.eventb.core.seqprover.contr"/>
<org.eventb.core.prReas name="r12" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.exF"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.rn"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm21/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p17">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p25,p26"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p25"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p30"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p32">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p32" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p35" org.eventb.core.prHyps="p33,p34">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p35" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p36">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT18" org.eventb.core.prHyps="p1,p2,p3,p5,p7,p8,p34,p33,p13,p12,p15,p29,p16,p18,p24,p28,p26,p20"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p41,p42,p44,p14"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p36" org.eventb.core.prHyps="p4,p9,p15,p20,p11,p14,p22,p17,p1,p13,p12,p5,p18,p16,p2,p7,p3,p8,p24,p26,p28,p29,p31,p33,p34,p37,p38,p39,p40,p41,p42,p43,p44,p45,p46,p47,p48,p49,p50,p51,p52,p53,p54,p55,p56,p57,p58">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p59">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p59" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p60">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT18" org.eventb.core.prHyps="p1,p2,p3,p5,p7,p8,p34,p33,p13,p12,p15,p29,p16,p18,p24,p28,p26,p20"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p41,p42,p44,p14"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional image goal for bagunion(b1 ↦ b2)" org.eventb.core.prGoal="p60" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p60" org.eventb.core.prHyps="p61">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p60" org.eventb.core.prHyps="p15">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p61">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p61" org.eventb.core.prHyps="p61"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p62">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT18" org.eventb.core.prHyps="p1,p2,p3,p5,p7,p8,p34,p33,p13,p12,p15,p29,p16,p18,p24,p28,p26,p20"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p41,p42,p44,p14"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p62" org.eventb.core.prHyps="p15">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p34">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p34" org.eventb.core.prHyps="p34"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p63">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p9">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT18" org.eventb.core.prHyps="p1,p2,p3,p5,p7,p8,p34,p33,p13,p12,p15,p29,p16,p18,p24,p28,p26,p20"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p41,p42,p44,p14"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p63" org.eventb.core.prHyps="p15">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p33">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="p33"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagunion(b1 ↦ b2)∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="bagunion(b1 ↦ b2)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="bagunion(b1 ↦ b2)∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagunion(b1 ↦ b2)∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="b1∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagunion(b1 ↦ b2)∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagunion(b1 ↦ b2)∈dom(bagvalue)∧⊤∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="b1 ↦ b2∈dom(bagunion)∧bagunion∈ℙ(COIN × ℤ) × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧bagunion(b1 ↦ b2)∈dom(bagvalue)∧b1∈dom(bagvalue)∧b2∈dom(bagvalue)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.funImgGoal"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm21/THM" org.eventb.core.confidence="1" org.eventb.core.prFresh="b1,b2" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p22,p23"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b1,b2)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p28">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p28" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="p29,p30">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="DESELECT19" org.eventb.core.prHyps="p1,p3,p2,p4,p6,p7,p30,p29,p12,p11,p13,p25,p15,p16,p21,p24,p23,p18,p19"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p10">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p37,p38,p40,p14"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst b1,b2)" org.eventb.core.prHyps="p47">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p55">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p55" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p56">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p47"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p50,p49,p56" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p56"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p57" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p57"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1" org.eventb.core.prDisplay="rv (1) (bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2))" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="p8,p10,p27,p32,p33,p34,p35,p36,p39,p41,p42,p43,p44,p45,p46,p48,p49,p50,p51,p52,p53,p54,p58"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="b1∈COINBAG">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="b1∈COIN → ℕ">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="⊤∧⊤⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="b2∈COIN → ℕ">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="b2∈COINBAG">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b2">
<org.eventb.core.prIdent name="b2" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="b1">
<org.eventb.core.prIdent name="b1" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.review"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm23/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p7,p8"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p14">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p14" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p16">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p16" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="p18">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="DESELECT19" org.eventb.core.prHyps="p25,p41,p37,p31,p39,p45,p43,p29,p27,p21,p12,p1,p35,p33,p5,p18,p10,p8,p23"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p53" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p30,p32,p36,p53"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p47">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p58">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p58" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p59">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p59" org.eventb.core.prHyps="p52">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p60">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p60" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p61">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p61" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p62">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p62" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p63">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p63" org.eventb.core.prHyps="p1"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p64">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="DESELECT19" org.eventb.core.prHyps="p25,p41,p37,p31,p39,p45,p43,p29,p27,p21,p12,p1,p35,p33,p5,p18,p10,p8,p23"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p53" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p30,p32,p36,p53"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p64" org.eventb.core.prHyps="p52">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p61">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p61" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p62">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p62" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p65">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="DESELECT19" org.eventb.core.prHyps="p25,p41,p37,p31,p39,p45,p43,p29,p27,p21,p12,p1,p35,p33,p5,p18,p10,p8,p23"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p65" org.eventb.core.prHyps="p52"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="bagvalue(emptybag)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧c∈dom(b)∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="c∈COIN∧⊤">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="c∈dom(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="c ↦ b∈COIN × (COIN → ℕ)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="bagvalue(COIN × {0})=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="c ↦ b∈dom(addcoin)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧c∈dom(b)∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧c∈dom(b)∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="c∈COIN∧b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧c∈dom(b)∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧c∈dom(b)∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="COIN"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × (COIN → ℕ)"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm25/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p4"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p6,p7"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p15">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p8"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p11"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p15" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p21" org.eventb.core.prHyps="p20">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p21" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p22">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p49" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="DESELECT21" org.eventb.core.prHyps="p23,p25,p27,p29,p31,p33,p35,p37,p39,p41,p43,p45,p47,p49,p51,p4,p6,p9,p11,p16,p20"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p59" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p59,p32,p34,p38"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p22" org.eventb.core.prHyps="p58">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p64">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p64" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p65">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p65" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p66">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p49" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="DESELECT21" org.eventb.core.prHyps="p23,p25,p27,p29,p31,p33,p35,p37,p39,p41,p43,p45,p47,p49,p51,p4,p6,p9,p11,p16,p20"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p66" org.eventb.core.prHyps="p58"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="bagvalue(emptybag)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="c∈dom(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="bagvalue(COIN × {0})=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="removecoin∈COIN × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="c∈dom(b)∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm26/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p33">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p30,p31"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p33" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p39">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="HIDE9" org.eventb.core.prHyps="p32"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p39" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p43">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p38"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p43" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p45">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p45" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p47" org.eventb.core.prHyps="p46">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p47" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p48">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p63" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p68"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="DESELECT22" org.eventb.core.prHyps="p14,p1,p15,p2,p3,p19,p63,p42,p5,p40,p8,p21,p22,p35,p24,p11,p12,p29,p34,p46,p31,p27"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p20">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p53" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p54" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p56" org.eventb.core.prInfHyps="p75"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p53,p54,p56,p9"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p48" org.eventb.core.prHyps="p71">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p76">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p76" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p77">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p77" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p78">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p63" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p68"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="DESELECT22" org.eventb.core.prHyps="p14,p1,p15,p2,p3,p19,p63,p42,p5,p40,p8,p21,p22,p35,p24,p11,p12,p29,p34,p46,p31,p27"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p78" org.eventb.core.prHyps="p71"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p79">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p79" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p80">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p80" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p82" org.eventb.core.prHyps="p46,p81">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p82" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p83">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p63" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p68"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="DESELECT22" org.eventb.core.prHyps="p14,p1,p15,p2,p3,p19,p63,p42,p5,p40,p8,p21,p22,p35,p24,p11,p12,p29,p34,p46,p31,p27"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p20">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p53" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p54" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p56" org.eventb.core.prInfHyps="p75"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p53,p54,p56,p9"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p70"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p83" org.eventb.core.prHyps="p10,p16,p4,p22,p27,p20,p9,p28,p23,p14,p8,p21,p2,p12,p24,p1,p3,p15,p5,p19,p11,p25,p29,p31,p34,p35,p40,p41,p42,p46,p81,p49,p50,p51,p52,p53,p54,p55,p56,p57,p58,p59,p60,p61,p62,p65,p66,p67,p68,p69,p70,p71,p72,p73,p74,p75">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p84">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p84" org.eventb.core.prHyps="p25"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="(∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ)∧(∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)∧removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ))"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)"/>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="finite(COIN)"/>
<org.eventb.core.prPred name="p75" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="c∈dom(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p74" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p72" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·(c∈COIN∧b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ)∧(c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)∧removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ))"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p82" org.eventb.core.predicate="c ↦ b∈dom(removecoin)∧removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p71" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p69" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p77" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p79" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)∧removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p81" org.eventb.core.predicate="¬b(c)=0">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p70" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p84" org.eventb.core.predicate="removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p80" org.eventb.core.predicate="b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)∧removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p83" org.eventb.core.predicate="c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p76" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p78" org.eventb.core.predicate="b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)"/>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="removecoin∈COIN × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="(∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ)∧(∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)∧removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ))"/>
<org.eventb.core.prPred name="p73" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="removecoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="c∈dom(b)∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="(∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒c∈dom(b)∧b∈COIN ⇸ ℤ)∧(∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)∧removecoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ))"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.mngHyp"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm27/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p10,p11"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p13"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p14"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p16">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p16" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="p17,p18">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p20">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE9" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE11" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE12" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p26"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p29"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p5">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p49" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p53" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p55" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p57" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p59" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p62" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p68"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF22" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF23" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="DESELECT24" org.eventb.core.prHyps="p34,p1,p37,p39,p41,p43,p45,p47,p49,p51,p53,p55,p57,p59,p3,p62,p8,p10,p18,p22,p24,p30,p32,p33"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p6">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p72" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p75"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p50" org.eventb.core.prInfHyps="p76"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p72,p44,p46,p50"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p20" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p77">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p77" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p78">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p78" org.eventb.core.prHyps="p18,p17">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p79">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p79" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p80">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p80" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p81">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p81" org.eventb.core.prHyps="p3"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p82">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional image goal for addcoin(c ↦ b)" org.eventb.core.prGoal="p82" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p82" org.eventb.core.prHyps="p83">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p82" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p83">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p83" org.eventb.core.prHyps="p83"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p4">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p4" org.eventb.core.prHyps="p4"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p84">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p84" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p18">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p18" org.eventb.core.prHyps="p18"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p85">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p85" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p17">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p17" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p80">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p23"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p26"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p27"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE9" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="HIDE11" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="HIDE12" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p80" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e2"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="-" org.eventb.core.prGoal="p86">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p86" org.eventb.core.prHyps="p2"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p77" org.eventb.core.predicate="c ↦ b∈COIN × COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p85" org.eventb.core.predicate="c∈dom(CoinValue)">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p72" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p76" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p75" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p82" org.eventb.core.predicate="addcoin(c ↦ b)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p78" org.eventb.core.predicate="c∈COIN∧b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p83" org.eventb.core.predicate="addcoin(c ↦ b)∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p73" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p79" org.eventb.core.predicate="⊤∧⊤"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p81" org.eventb.core.predicate="addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p69" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p80" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p86" org.eventb.core.predicate="CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p70" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="c ↦ b∈dom(addcoin)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="c∈COIN∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p84" org.eventb.core.predicate="b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p71" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p74" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="removecoin∈COIN × COINBAG → COINBAG">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN × COINBAG"/>
<org.eventb.core.prExpr name="e2" org.eventb.core.expression="COIN"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.funImgGoal"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm28/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27,p28,p29,p30" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p25">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p37">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p33,p34"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p21"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p37" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p44">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p27"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="HIDE9" org.eventb.core.prHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="HIDE11" org.eventb.core.prHyps="p36"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p44" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p49">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p43"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p49" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p50">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p50" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p52" org.eventb.core.prHyps="p51">
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p52" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p53">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p68" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p75"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p76"/>
<org.eventb.core.prHypAction name="FORWARD_INF22" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p77"/>
<org.eventb.core.prHypAction name="FORWARD_INF23" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p78"/>
<org.eventb.core.prHypAction name="DESELECT24" org.eventb.core.prHyps="p14,p48,p1,p15,p2,p3,p19,p68,p47,p5,p45,p8,p22,p23,p39,p24,p11,p12,p32,p38,p51,p34,p28,p29"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p20">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p79"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p58" org.eventb.core.prInfHyps="p80"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p59" org.eventb.core.prInfHyps="p81"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p61" org.eventb.core.prInfHyps="p82"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p58,p59,p61,p9"/>
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p53" org.eventb.core.prHyps="p10,p16,p4,p23,p28,p20,p9,p30,p25,p14,p8,p22,p2,p12,p24,p1,p3,p15,p5,p19,p11,p26,p29,p32,p34,p38,p39,p45,p46,p47,p48,p51,p54,p55,p56,p57,p58,p59,p60,p61,p62,p63,p64,p65,p66,p67,p70,p71,p72,p73,p74,p75,p76,p77,p78,p79,p80,p81,p82">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p83">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p83" org.eventb.core.prHyps="p11"/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name=")" org.eventb.core.prGoal="p84">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p68" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p75"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p76"/>
<org.eventb.core.prHypAction name="FORWARD_INF22" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p77"/>
<org.eventb.core.prHypAction name="FORWARD_INF23" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p78"/>
<org.eventb.core.prHypAction name="DESELECT24" org.eventb.core.prHyps="p14,p48,p1,p15,p2,p3,p19,p68,p47,p5,p45,p8,p22,p23,p39,p24,p11,p12,p32,p38,p51,p34,p28,p29"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p20">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p79"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p58" org.eventb.core.prInfHyps="p80"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p59" org.eventb.core.prInfHyps="p81"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p61" org.eventb.core.prInfHyps="p82"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p58,p59,p61,p9"/>
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional image goal for addcoin(c ↦ b)" org.eventb.core.prGoal="p84" org.eventb.core.prHyps="p11">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p84" org.eventb.core.prHyps="p85">
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p84" org.eventb.core.prHyps="p23">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p85">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p85" org.eventb.core.prHyps="p85"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="*" org.eventb.core.prGoal="p86">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p68" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p75"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p76"/>
<org.eventb.core.prHypAction name="FORWARD_INF22" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p77"/>
<org.eventb.core.prHypAction name="FORWARD_INF23" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p78"/>
<org.eventb.core.prHypAction name="DESELECT24" org.eventb.core.prHyps="p14,p48,p1,p15,p2,p3,p19,p68,p47,p5,p45,p8,p22,p23,p39,p24,p11,p12,p32,p38,p51,p34,p28,p29"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p20">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p79"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p58" org.eventb.core.prInfHyps="p80"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p59" org.eventb.core.prInfHyps="p81"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p61" org.eventb.core.prInfHyps="p82"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p58,p59,p61,p9"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p86" org.eventb.core.prHyps="p23">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p51">
<org.eventb.core.prRule name="r11" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="hyp" org.eventb.core.prGoal="p51" org.eventb.core.prHyps="p51"/>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="+" org.eventb.core.prGoal="p87">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p68" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p70"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p75"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p76"/>
<org.eventb.core.prHypAction name="FORWARD_INF22" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p77"/>
<org.eventb.core.prHypAction name="FORWARD_INF23" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p78"/>
<org.eventb.core.prHypAction name="DESELECT24" org.eventb.core.prHyps="p14,p48,p1,p15,p2,p3,p19,p68,p47,p5,p45,p8,p22,p23,p39,p24,p11,p12,p32,p38,p51,p34,p28,p29"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p20">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p79"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p58" org.eventb.core.prInfHyps="p80"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p59" org.eventb.core.prInfHyps="p81"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p61" org.eventb.core.prInfHyps="p82"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p58,p59,p61,p9"/>
<org.eventb.core.prRule name="r10" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p87" org.eventb.core.prHyps="p16">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p88">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p88" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p89">
<org.eventb.core.prRule name="r12" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p89" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="," org.eventb.core.prGoal="p90">
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p90" org.eventb.core.prHyps="p16"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p69" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)"/>
<org.eventb.core.prPred name="p73" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p71" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p87" org.eventb.core.predicate="c∈dom(CoinValue)">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="finite(COIN)"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p82" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p81" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p84" org.eventb.core.predicate="addcoin(c ↦ b)∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p85" org.eventb.core.predicate="addcoin(c ↦ b)∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p79" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p78" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p83" org.eventb.core.predicate="addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)"/>
<org.eventb.core.prPred name="p75" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p89" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p90" org.eventb.core.predicate="CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p76" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p74" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="c ↦ b∈dom(addcoin)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p86" org.eventb.core.predicate="b∈dom(bagvalue)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p88" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p72" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p77" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)"/>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="removecoin∈COIN × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒c ↦ b∈dom(addcoin)∧addcoin∈COIN × ℙ(COIN × ℤ) ⇸ ℙ(COIN × ℤ)∧addcoin(c ↦ b)∈dom(bagvalue)∧⊤∧b∈dom(bagvalue)∧c∈dom(CoinValue)∧CoinValue∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p80" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="removecoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p70" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="COIN"/>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COINBAG"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.funImgGoal"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
<org.eventb.core.prReas name="r11" org.eventb.core.prRID="org.eventb.core.seqprover.hyp"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r10" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r12" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm25/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19,p20,p21,p22,p23,p24,p25,p26,p27" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p31">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p29,p30"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p31" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p36">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p25"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p29"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p36" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p39">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p35"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p39" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p40">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p40" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p43" org.eventb.core.prHyps="p41,p42">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p4">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p21" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p26" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="DESELECT21" org.eventb.core.prHyps="p13,p14,p1,p2,p3,p18,p5,p37,p20,p7,p21,p33,p10,p22,p24,p11,p28,p41,p32,p30,p26"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p19">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p49" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p68"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p48,p49,p51,p8"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="ML" org.eventb.core.prGoal="p43" org.eventb.core.prHyps="p9,p15,p4,p21,p26,p19,p8,p27,p23,p13,p7,p20,p2,p11,p22,p1,p3,p14,p5,p18,p10,p24,p28,p30,p32,p33,p37,p38,p41,p42,p44,p45,p46,p47,p48,p49,p50,p51,p52,p53,p54,p55,p56,p57,p58,p59,p60,p61,p62,p63,p64,p65,p66,p67,p68">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="0;1;2;3:30000"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)"/>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="finite(COIN)"/>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="bagvalue∈ℙ(COIN × ℤ) ⇸ ℤ"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="emptybag∈dom(bagvalue)"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="¬b(c)=0">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="CoinValue∈COIN ↣ ℕ1"/>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b"/>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)"/>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE"/>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="removecoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}"/>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="com.clearsy.atelierb.provers.core.externalML:1"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm26/THM" org.eventb.core.confidence="0" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p10">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p4"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p6,p7"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p9"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p8"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p10" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p19">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="HIDE9" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p19" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p23">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p23" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="p25,p26">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p29"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p50" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p52" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p54" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p56" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="DESELECT22" org.eventb.core.prHyps="p32,p44,p48,p38,p46,p52,p56,p22,p50,p20,p34,p36,p28,p14,p42,p54,p40,p4,p12,p25,p7,p30"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p65" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p68"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p37,p39,p43,p65"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay=" rewrites in goal" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p70">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p70" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p71">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p72" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p72"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1.1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) ⇸ (COIN → ℕ)"/>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="bagvalue(emptybag)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p69" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p71" org.eventb.core.predicate="removecoin(c ↦ b)=({c} ⩤ b)∪{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="bagvalue(COIN × {0})=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p73" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="¬b(c)=0">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p70" org.eventb.core.predicate="removecoin(c ↦ b)=(dom({c ↦ b(c) − 1}) ⩤ b)∪{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="removecoin∈COIN × COINBAG ⇸ COINBAG"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)"/>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}"/>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p72" org.eventb.core.predicate="removecoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.relOvrRewrites"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm27/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p2" org.eventb.core.prInfHyps="p3"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p2"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p5,p6"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p5"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="HIDE9" org.eventb.core.prHyps="p8"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE11" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p16"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p21"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p24">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p24" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="p25">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p27" org.eventb.core.prInfHyps="p28"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p29" org.eventb.core.prInfHyps="p30"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p31" org.eventb.core.prInfHyps="p32"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p33" org.eventb.core.prInfHyps="p34"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p35" org.eventb.core.prInfHyps="p36"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p37" org.eventb.core.prInfHyps="p38"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p40"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p42"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p43" org.eventb.core.prInfHyps="p44"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p46"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p47" org.eventb.core.prInfHyps="p48"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p49" org.eventb.core.prInfHyps="p50"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p51" org.eventb.core.prInfHyps="p52"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p53" org.eventb.core.prInfHyps="p54"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p55" org.eventb.core.prInfHyps="p56"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p58"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p60"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p23" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF22" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="DESELECT23" org.eventb.core.prHyps="p31,p23,p43,p47,p37,p45,p51,p22,p49,p20,p33,p35,p27,p14,p41,p53,p39,p55,p3,p12,p25,p6,p29"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="NewPP" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="R0"/>
<org.eventb.core.prString name=".maxSteps" org.eventb.core.prSValue="-1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="b={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})">
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="removecoin∈COIN × COINBAG → COINBAG">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0">
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.pp.pp:1"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm28/THM" org.eventb.core.confidence="0" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1,p2,p3" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p6" org.eventb.core.prInfHyps="p7,p8"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p6"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p9" org.eventb.core.prInfHyps="p10"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p9"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p11" org.eventb.core.prInfHyps="p12"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p11"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p21">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p13" org.eventb.core.prInfHyps="p14"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p13"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p15" org.eventb.core.prInfHyps="p16"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p15"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p1" org.eventb.core.prInfHyps="p17"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p1"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p7" org.eventb.core.prInfHyps="p18"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p7"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p10" org.eventb.core.prInfHyps="p19"/>
<org.eventb.core.prHypAction name="HIDE9" org.eventb.core.prHyps="p10"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p12" org.eventb.core.prInfHyps="p20"/>
<org.eventb.core.prHypAction name="HIDE11" org.eventb.core.prHyps="p12"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p21" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p26">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p17" org.eventb.core.prInfHyps="p22"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p17"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p18" org.eventb.core.prInfHyps="p23"/>
<org.eventb.core.prHypAction name="HIDE3" org.eventb.core.prHyps="p18"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p19" org.eventb.core.prInfHyps="p24"/>
<org.eventb.core.prHypAction name="HIDE5" org.eventb.core.prHyps="p19"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p20" org.eventb.core.prInfHyps="p25"/>
<org.eventb.core.prHypAction name="HIDE7" org.eventb.core.prHyps="p20"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c,b)" org.eventb.core.prGoal="p26" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p27">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p27" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="p28">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p2">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p30" org.eventb.core.prInfHyps="p31"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p32" org.eventb.core.prInfHyps="p33"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p34" org.eventb.core.prInfHyps="p35"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p36" org.eventb.core.prInfHyps="p37"/>
<org.eventb.core.prHypAction name="FORWARD_INF4" org.eventb.core.prHyps="p38" org.eventb.core.prInfHyps="p39"/>
<org.eventb.core.prHypAction name="FORWARD_INF5" org.eventb.core.prHyps="p40" org.eventb.core.prInfHyps="p41"/>
<org.eventb.core.prHypAction name="FORWARD_INF6" org.eventb.core.prHyps="p42" org.eventb.core.prInfHyps="p43"/>
<org.eventb.core.prHypAction name="FORWARD_INF7" org.eventb.core.prHyps="p44" org.eventb.core.prInfHyps="p45"/>
<org.eventb.core.prHypAction name="FORWARD_INF8" org.eventb.core.prHyps="p46" org.eventb.core.prInfHyps="p47"/>
<org.eventb.core.prHypAction name="FORWARD_INF9" org.eventb.core.prHyps="p48" org.eventb.core.prInfHyps="p49"/>
<org.eventb.core.prHypAction name="FORWARD_INF10" org.eventb.core.prHyps="p50" org.eventb.core.prInfHyps="p51"/>
<org.eventb.core.prHypAction name="FORWARD_INF11" org.eventb.core.prHyps="p52" org.eventb.core.prInfHyps="p53"/>
<org.eventb.core.prHypAction name="FORWARD_INF12" org.eventb.core.prHyps="p54" org.eventb.core.prInfHyps="p55"/>
<org.eventb.core.prHypAction name="FORWARD_INF13" org.eventb.core.prHyps="p56" org.eventb.core.prInfHyps="p57"/>
<org.eventb.core.prHypAction name="FORWARD_INF14" org.eventb.core.prHyps="p58" org.eventb.core.prInfHyps="p59"/>
<org.eventb.core.prHypAction name="FORWARD_INF15" org.eventb.core.prHyps="p60" org.eventb.core.prInfHyps="p61"/>
<org.eventb.core.prHypAction name="FORWARD_INF16" org.eventb.core.prHyps="p5" org.eventb.core.prInfHyps="p62"/>
<org.eventb.core.prHypAction name="FORWARD_INF17" org.eventb.core.prHyps="p8" org.eventb.core.prInfHyps="p63"/>
<org.eventb.core.prHypAction name="FORWARD_INF18" org.eventb.core.prHyps="p14" org.eventb.core.prInfHyps="p64"/>
<org.eventb.core.prHypAction name="FORWARD_INF19" org.eventb.core.prHyps="p16" org.eventb.core.prInfHyps="p65"/>
<org.eventb.core.prHypAction name="FORWARD_INF20" org.eventb.core.prHyps="p22" org.eventb.core.prInfHyps="p66"/>
<org.eventb.core.prHypAction name="FORWARD_INF21" org.eventb.core.prHyps="p24" org.eventb.core.prInfHyps="p67"/>
<org.eventb.core.prHypAction name="FORWARD_INF22" org.eventb.core.prHyps="p25" org.eventb.core.prInfHyps="p68"/>
<org.eventb.core.prHypAction name="FORWARD_INF23" org.eventb.core.prHyps="p28" org.eventb.core.prInfHyps="p69"/>
<org.eventb.core.prHypAction name="DESELECT24" org.eventb.core.prHyps="p25,p34,p50,p46,p40,p48,p54,p24,p52,p22,p38,p36,p30,p16,p56,p44,p58,p42,p5,p28,p14,p8,p32,p60"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with emptybag=COIN × {0}" org.eventb.core.prHyps="p3">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p70" org.eventb.core.prInfHyps="p71"/>
<org.eventb.core.prHypAction name="FORWARD_INF1" org.eventb.core.prHyps="p39" org.eventb.core.prInfHyps="p72"/>
<org.eventb.core.prHypAction name="FORWARD_INF2" org.eventb.core.prHyps="p41" org.eventb.core.prInfHyps="p73"/>
<org.eventb.core.prHypAction name="FORWARD_INF3" org.eventb.core.prHyps="p45" org.eventb.core.prInfHyps="p74"/>
<org.eventb.core.prHypAction name="DESELECT4" org.eventb.core.prHyps="p39,p41,p45,p70"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="sl/ds" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="SELECT0" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ hyp (inst c,b)" org.eventb.core.prHyps="p22">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p75">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p75" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prHyps="p76">
<org.eventb.core.prHypAction name="DESELECT0" org.eventb.core.prHyps="p22"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="generalized MP" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p28,p76" org.eventb.core.prInfHyps="p77"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p76"/>
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p77" org.eventb.core.prInfHyps="p78"/>
<org.eventb.core.prHypAction name="HIDE1" org.eventb.core.prHyps="p77"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with addcoin(c ↦ b)=b{c ↦ b(c)+1}" org.eventb.core.prGoal="p29" org.eventb.core.prHyps="p78">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p79">
<org.eventb.core.prRule name="r9" org.eventb.core.confidence="1000" org.eventb.core.prDisplay=" rewrites in goal" org.eventb.core.prGoal="p79" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p80">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p80" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p81"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="0.1.1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prExprRef name=".exprs" org.eventb.core.prRef="e0,e1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="CoinValue" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="addcoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="bagvalue" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℤ)"/>
<org.eventb.core.prIdent name="emptybag" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prPred name="p19" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p46" org.eventb.core.predicate="bagdiff∈COINBAG × COINBAG ⇸ COINBAG">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p81" org.eventb.core.predicate="bagvalue(({c} ⩤ b)∪{c ↦ b(c)+1})=bagvalue(b)+CoinValue(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p48" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p17" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p39" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p49" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒(b1 ↦ b2∈dom(bagdiff)⇔subbag(b2 ↦ b1)=TRUE)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p41" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p45" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p31" org.eventb.core.predicate="bagvalue∈(COIN → ℕ) → ℕ"/>
<org.eventb.core.prPred name="p55" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p64" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p62" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p36" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p70" org.eventb.core.predicate="bagvalue(emptybag)=0"/>
<org.eventb.core.prPred name="p76" org.eventb.core.predicate="b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p74" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒subbag(COIN × {0} ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p14" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COINBAG"/>
<org.eventb.core.prPred name="p26" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(addcoin(c ↦ b))=bagvalue(b)+CoinValue(c)"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(b≠(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p73" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagvalue((COIN × {0})b)=bagvalue(b)"/>
<org.eventb.core.prPred name="p50" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p77" org.eventb.core.predicate="⊤⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p79" org.eventb.core.predicate="bagvalue(b{c ↦ b(c)+1})=bagvalue(b)+CoinValue(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p80" org.eventb.core.predicate="bagvalue((dom({c ↦ b(c)+1}) ⩤ b)∪{c ↦ b(c)+1})=bagvalue(b)+CoinValue(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p71" org.eventb.core.predicate="bagvalue(COIN × {0})=0"/>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="emptybag=COIN × {0}"/>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒bagvalue(addcoin(c ↦ b))=bagvalue(b)+CoinValue(c)"/>
<org.eventb.core.prPred name="p78" org.eventb.core.predicate="addcoin(c ↦ b)=b{c ↦ b(c)+1}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p21" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG⇒bagvalue(addcoin(c ↦ b))=bagvalue(b)+CoinValue(c)"/>
<org.eventb.core.prPred name="p30" org.eventb.core.predicate="bagvalue∈COINBAG → ℕ"/>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·c∈COIN)∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p28" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p69" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p59" org.eventb.core.predicate="removecoin∈COIN × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p32" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COINBAG∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p43" org.eventb.core.predicate="subbag∈(COIN → ℕ) × (COIN → ℕ) → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p66" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p60" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p27" org.eventb.core.predicate="b∈COINBAG⇒bagvalue(addcoin(c ↦ b))=bagvalue(b)+CoinValue(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p75" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p25" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p40" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagvalue(emptybagb)=bagvalue(b)"/>
<org.eventb.core.prPred name="p67" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p65" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p52" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p22" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p15" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p20" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·⊤∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p37" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ⇒bagunion(b1 ↦ b2)=bagunion(b2 ↦ b1)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p56" org.eventb.core.predicate="addcoin∈COIN × COINBAG → COINBAG"/>
<org.eventb.core.prPred name="p12" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p42" org.eventb.core.predicate="subbag∈COINBAG × COINBAG → BOOL">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p63" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ"/>
<org.eventb.core.prPred name="p68" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ∧¬b(c)=0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p47" org.eventb.core.predicate="bagdiff∈(COIN → ℕ) × (COIN → ℕ) ⇸ (COIN → ℕ)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p53" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b1 ↦ b2)=TRUE⇒bagvalue(b1)≤bagvalue(b2)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p34" org.eventb.core.predicate="bagunion∈COINBAG × COINBAG → COINBAG">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p57" org.eventb.core.predicate="addcoin∈COIN × (COIN → ℕ) → (COIN → ℕ)"/>
<org.eventb.core.prPred name="p29" org.eventb.core.predicate="bagvalue(addcoin(c ↦ b))=bagvalue(b)+CoinValue(c)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p33" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ),c⦂COIN·b∈COIN → ℕ∧c∈dom(b)⇒bagvalue(b)=b(c)∗CoinValue(c)+bagvalue(b{c ↦ 0})"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG⇒addcoin(c ↦ b)=b{c ↦ b(c)+1}"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧((∀c⦂COIN·c∈COIN∧b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE)">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p54" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagvalue(bagunion(b1 ↦ b2))=bagvalue(b1)+bagvalue(b2)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p24" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·b∈COINBAG∧¬b(c)=0⇒c ↦ b∈dom(removecoin)">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p23" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="∀c⦂COIN,b⦂ℙ(COIN×ℤ)·c∈COIN∧b∈COINBAG∧b(c)≠0⇒removecoin(c ↦ b)=b{c ↦ b(c) − 1}">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p72" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒bagunion(COIN × {0} ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p18" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·⊤∧(∀c⦂COIN·b1(c)≤b2(c))⇔subbag(b1 ↦ b2)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p38" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒bagunion(emptybag ↦ b)=b">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p51" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COIN → ℕ∧b2∈COIN → ℕ∧subbag(b2 ↦ b1)=TRUE⇒bagvalue(bagdiff(b1 ↦ b2))=bagvalue(b1) − bagvalue(b2)">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p16" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG∧subbag(b2 ↦ b1)=TRUE⇒bagdiff(b1 ↦ b2)={c⦂COIN·⊤ ∣ c ↦ b1(c) − b2(c)}">
<org.eventb.core.prIdent name="bagdiff" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p44" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒subbag(emptybag ↦ b)=TRUE">
<org.eventb.core.prIdent name="subbag" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×BOOL)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p58" org.eventb.core.predicate="removecoin∈COIN × COINBAG → COINBAG">
<org.eventb.core.prIdent name="removecoin" org.eventb.core.type="ℙ(COIN×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG∧(¬b=(∅ ⦂ ℙ(COIN×ℤ))⇒ran(b)={0})⇒bagvalue(b)=0"/>
<org.eventb.core.prPred name="p13" org.eventb.core.predicate="∀b1⦂ℙ(COIN×ℤ),b2⦂ℙ(COIN×ℤ)·b1∈COINBAG∧b2∈COINBAG⇒bagunion(b1 ↦ b2)={c⦂COIN·c∈COIN ∣ c ↦ b1(c)+b2(c)}">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p61" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COIN → ℕ⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prPred name="p35" org.eventb.core.predicate="bagunion∈(COIN → ℕ) × (COIN → ℕ) → (COIN → ℕ)">
<org.eventb.core.prIdent name="bagunion" org.eventb.core.type="ℙ(ℙ(COIN×ℤ)×ℙ(COIN×ℤ)×ℙ(COIN×ℤ))"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="c">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prExpr>
<org.eventb.core.prExpr name="e1" org.eventb.core.expression="b">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prExpr>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.mngHyp"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.genMPL1"/>
<org.eventb.core.prReas name="r9" org.eventb.core.prRID="org.eventb.core.seqprover.relOvrRewrites"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.allD"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm2/WD" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b,c" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="COIN">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="simplification rewrites" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p2">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p2" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p3">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p3" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p5" org.eventb.core.prHyps="p4">
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∧ goal" org.eventb.core.prGoal="p5" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p6">
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees c)" org.eventb.core.prGoal="p6" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p7">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r5" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="total function dom substitution in goal" org.eventb.core.prGoal="p7" org.eventb.core.prHyps="p8">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p9">
<org.eventb.core.prRule name="r6" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="type rewrites" org.eventb.core.prGoal="p9" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p10">
<org.eventb.core.prRule name="r7" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⊤ goal" org.eventb.core.prGoal="p10" org.eventb.core.prHyps=""/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prString name=".pos" org.eventb.core.prSValue="1"/>
<org.eventb.core.prExprRef name=".subst" org.eventb.core.prRef="e0"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
<org.eventb.core.prAnte name="(" org.eventb.core.prGoal="p11">
<org.eventb.core.prRule name="r4" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p4" org.eventb.core.prInfHyps="p8"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p4"/>
<org.eventb.core.prRule name="r8" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="functional goal" org.eventb.core.prGoal="p11" org.eventb.core.prHyps="p8"/>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prPred name="p10" org.eventb.core.predicate="⊤"/>
<org.eventb.core.prPred name="p11" org.eventb.core.predicate="b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="(∀c⦂COIN·c∈dom(b))∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="b∈COINBAG⇒(∀c⦂COIN·c∈dom(b))∧b∈COIN ⇸ ℤ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒(∀c⦂COIN·c∈dom(b)∧b∈COIN ⇸ ℤ)"/>
<org.eventb.core.prPred name="p6" org.eventb.core.predicate="∀c⦂COIN·c∈dom(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒(∀c⦂COIN·c∈dom(b))∧b∈COIN ⇸ ℤ"/>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p8" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p7" org.eventb.core.predicate="c∈dom(b)">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p9" org.eventb.core.predicate="c∈COIN">
<org.eventb.core.prIdent name="c" org.eventb.core.type="COIN"/>
</org.eventb.core.prPred>
<org.eventb.core.prExpr name="e0" org.eventb.core.expression="COIN"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.autoRewritesL3:0"/>
<org.eventb.core.prReas name="r4" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r6" org.eventb.core.prRID="org.eventb.core.seqprover.typeRewrites:1"/>
<org.eventb.core.prReas name="r5" org.eventb.core.prRID="org.eventb.core.seqprover.totalDom:2"/>
<org.eventb.core.prReas name="r7" org.eventb.core.prRID="org.eventb.core.seqprover.trueGoal"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.core.seqprover.conj:0"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r8" org.eventb.core.prRID="org.eventb.core.seqprover.isFunGoal"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
<org.eventb.core.prProof name="axm2/THM" org.eventb.core.confidence="1000" org.eventb.core.prFresh="b" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="p1" org.eventb.core.prSets="COIN" org.eventb.core.psManual="true">
<org.eventb.core.prRule name="r0" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="∀ goal (frees b)" org.eventb.core.prGoal="p0" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p2">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
<org.eventb.core.prRule name="r1" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="⇒ goal" org.eventb.core.prGoal="p2" org.eventb.core.prHyps="">
<org.eventb.core.prAnte name="'" org.eventb.core.prGoal="p4" org.eventb.core.prHyps="p3">
<org.eventb.core.prRule name="r2" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="eh with COINBAG=COIN → ℕ" org.eventb.core.prHyps="p1">
<org.eventb.core.prAnte name="'">
<org.eventb.core.prHypAction name="FORWARD_INF0" org.eventb.core.prHyps="p3" org.eventb.core.prInfHyps="p5"/>
<org.eventb.core.prHypAction name="DESELECT1" org.eventb.core.prHyps="p3"/>
<org.eventb.core.prRule name="r3" org.eventb.core.confidence="1000" org.eventb.core.prDisplay="NewPP" org.eventb.core.prGoal="p4" org.eventb.core.prHyps="">
<org.eventb.core.prString name=".arg" org.eventb.core.prSValue="R0"/>
<org.eventb.core.prString name=".maxSteps" org.eventb.core.prSValue="-1"/>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
</org.eventb.core.prAnte>
</org.eventb.core.prRule>
<org.eventb.core.prIdent name="COINBAG" org.eventb.core.type="ℙ(ℙ(COIN×ℤ))"/>
<org.eventb.core.prPred name="p4" org.eventb.core.predicate="b={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p2" org.eventb.core.predicate="b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p3" org.eventb.core.predicate="b∈COINBAG">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p1" org.eventb.core.predicate="COINBAG=COIN → ℕ"/>
<org.eventb.core.prPred name="p5" org.eventb.core.predicate="b∈COIN → ℕ">
<org.eventb.core.prIdent name="b" org.eventb.core.type="ℙ(COIN×ℤ)"/>
</org.eventb.core.prPred>
<org.eventb.core.prPred name="p0" org.eventb.core.predicate="∀b⦂ℙ(COIN×ℤ)·b∈COINBAG⇒b={c⦂COIN·⊤ ∣ c ↦ b(c)}"/>
<org.eventb.core.prReas name="r2" org.eventb.core.prRID="org.eventb.core.seqprover.eq:1"/>
<org.eventb.core.prReas name="r0" org.eventb.core.prRID="org.eventb.core.seqprover.allI"/>
<org.eventb.core.prReas name="r3" org.eventb.core.prRID="org.eventb.pp.pp:1"/>
<org.eventb.core.prReas name="r1" org.eventb.core.prRID="org.eventb.core.seqprover.impI"/>
</org.eventb.core.prProof>
</org.eventb.core.prFile>
